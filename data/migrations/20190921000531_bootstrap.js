
exports.up = function(knex) {
    return knex.schema.createTable('user', table => {
        table.string('username')
        table.string('email')
        table.string('password')
        table.datestring('date').defaultTo(knex.fn.now())
    })
    .createTable('group', table => {
      table.string('name')
      table.integer('owner')
        .references('id')
        .inTable('user')
        .notNull()
        .onDelete('RESTRICT')
      table.datestring('date').defaultTo(knex.fn.now())
    })
    .createTable('group_invite', table => {
        table.integer('group_id')
            .references('id')
            .inTable('group')
            .notNull()
            .onDelete('RESTRICT')
        table.integer('inviter')
            .references('id')
            .inTable('user')
            .notNull()
            .onDelete('RESTRICT')
        table.integer('invitee')
            .references('id')
            .inTable('user')
            .notNull()
            .onDelete('RESTRICT')
        table.boolean('valid').defaultTo(true)
        table.datestring('date').defaultTo(knex.fn.now())
    })
    .createTable('item', table => {
        table.integer('group_id')
            .references('id')
            .inTable('group')
            .notNull()
            .onDelete('RESTRICT')
        table.string('description')
        table.string('title')
        //PICTURES ?
        table.datestring('date').defaultTo(knex.fn.now())
    })
    .createTable('item_interests', table => {
        table.integer('item_id')
            .references('id')
            .inTable('item')
            .notNull()
            .onDelete('RESTRICT')
        table.integer('user_id')
            .references('id')
            .inTable('user')
            .notNull()
            .onDelete('RESTRICT')
        table.datestring('date').defaultTo(knex.fn.now())
    })
    .createTable('item_mentions', table => {
        table.integer('user_id')
            .references('id')
            .inTable('user')
            .notNull()
            .onDelete('RESTRICT')
        table.string('content')
        table.datestring('date').defaultTo(knex.fn.now())
    })
};

exports.down = function(knex) {
  knex.schema.dropTable('item')
  .dropTable('group')
  .dropTable('user')
};
